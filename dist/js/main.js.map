{"version":3,"file":"main.js","names":["document","addEventListener","burger","querySelector","menu","close","classList","add","body","remove","handleOption","el","target","closest","querySelectorAll","forEach","filter","overlay","contactsMobile","filterTabs","tab","locationBtn","locationOverlay","locationMobileBtn","locationModal","locationItems","toggle","item","innerHTML","phoneInputs","getInputsNumbersValue","input","value","replace","onPhoneInput","e","inputNumbersValue","formattedInputValue","selectionStart","length","data","test","indexOf","firstSymbols","substring","onPhoneKeyDown","keyCode","onPhonePaste","pasted","clipboardData","window","pastedText","getData","i","handleModalPopup","btn","blockModal","btns","modal","arrCloseButton","btnItem","evt","preventDefault","dataEmailValue","getAttribute","hiddenInput","hasAttribute","console","log","closeButton","screen","width","key","player","getElementById","iframeSrc","src","VID_REGEX","previewId","match","previewImg","imgSliderThumb","imgSlider","form","inputEmail","inputName","inputCheckbox","inputs","re","isEmailValid","String","toLowerCase","checked","submit","fileWrapper","Object","current_item","index","inputFile","fileList","textSelector","push","files","file","uploadFile","size","alert","textContent","name","dropZone","dropZoneText","maxFileSize","FileReader","ondragover","ondragleave","uploadDragFiles","dataTransfer","addClass","catalogTexts","switchPropertyText","style","fontSize","height","paddingLeft","paddingRight","string","handleCounter","itemsBlock","removeBtn","addBtn","inputField","counter","handleModalSearch","popupSearch","overlayBlue"],"sources":["main.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n  // --------------- Mobile menu ---------------\n  const burger = document.querySelector('.header__burger')\n  const menu = document.querySelector('.mobile-menu')\n  const close = document.querySelector('.mobile-menu__close')\n\n  burger.addEventListener(\"click\", () => {\n    menu.classList.add('active')\n    document.body.classList.add(\"no-scroll\")\n  })\n  close.addEventListener(\"click\", () => {\n    menu.classList.remove('active')\n    document.body.classList.remove(\"no-scroll\")\n  })\n\n  // --------------- Mobile menu / выпадающий список ---------------\n  // Выбор опций/сортировка\n  const handleOption = (el) => {\n    el = el.target;\n\n    // открытие списков\n    if (el.closest(\".linkHasChild\")) {\n      document.querySelectorAll(\".linkHasChild\").forEach(function (el) {\n        el.classList.remove(\"active\")\n      })\n      el.closest(\".linkHasChild\").classList.add(\"active\")\n    }\n  };\n  document.addEventListener(\"click\", handleOption);\n\n  // --------------- Выбор города ---------------\n  const filter = document.querySelector('.contacts__filter')\n  const overlay = document.querySelector('.contacts__overlay')\n  const contactsMobile = document.querySelectorAll('.contacts__head')\n  const filterTabs = document.querySelectorAll('.tabs__nav-item')\n\n  contactsMobile.forEach((tab) => {\n    tab.addEventListener(\"click\", () => {\n      filter.classList.add('visible-filter')\n      overlay.classList.add('visible-filter')\n      document.body.classList.add(\"no-scroll\")\n    })\n  })\n  filterTabs.forEach((tab) => {\n    tab.addEventListener(\"click\", () => {\n      filter.classList.remove('visible-filter')\n      overlay.classList.remove('visible-filter')\n      document.body.classList.remove(\"no-scroll\")\n    })\n  })\n\n  // --------------- Mobile menu / Выбор города ---------------\n  const locationBtn = document.querySelector('.location__button')\n  const locationOverlay = document.querySelector('.location__overlay')\n  const locationMobileBtn = document.querySelector('.mobile-menu__button')\n  const locationModal = document.querySelector('.location__modal')\n  const locationItems = document.querySelectorAll('.location__modal-item')\n\n  locationBtn.addEventListener(\"click\", () => {\n    locationModal.classList.toggle('visible-location')\n  })\n  locationMobileBtn.addEventListener(\"click\", () => {\n    locationModal.classList.toggle('visible-location')\n    locationOverlay.classList.toggle('visible-location-overlay')\n  })\n\n  locationItems.forEach((item) => {\n    item.addEventListener('click', () => {\n      locationBtn.innerHTML = item.innerHTML\n      locationMobileBtn.innerHTML = item.innerHTML\n      locationModal.classList.remove('visible-location')\n      locationOverlay.classList.remove('visible-location-overlay')\n    })\n  })\n\n  // --------------- Маска ввода номера телефона ---------------\n  let phoneInputs = document.querySelectorAll(\"input[data-tel-input]\");\n\n  let getInputsNumbersValue = function (input) {\n    return input.value.replace(/\\D/g, \"\");\n  };\n\n  // Обработка ввода\n  let onPhoneInput = function (e) {\n    let input = e.target;\n    let inputNumbersValue = getInputsNumbersValue(input);\n    let formattedInputValue = \"\";\n    let selectionStart = input.selectionStart;\n\n    if (!inputNumbersValue) {\n      return (input.value = \"\");\n    }\n\n    if (input.value.length !== selectionStart) {\n      if (e.data && /\\D/g.test(e.data)) {\n        input.value = inputNumbersValue;\n      }\n      return;\n    }\n\n    if ([\"7\", \"8\", \"9\"].indexOf(inputNumbersValue[0]) > -1) {\n      // Российский номер\n\n      if (inputNumbersValue[0] === \"9\") {\n        inputNumbersValue = \"7\" + inputNumbersValue;\n      }\n      let firstSymbols = inputNumbersValue[0] === \"8\" ? \"8\" : \"+7\";\n      formattedInputValue = firstSymbols + \" \";\n\n      //Форматирование\n      if (inputNumbersValue.length > 1) {\n        formattedInputValue += \"(\" + inputNumbersValue.substring(1, 4);\n      }\n      if (inputNumbersValue.length >= 5) {\n        formattedInputValue += \") \" + inputNumbersValue.substring(4, 7);\n      }\n      if (inputNumbersValue.length >= 8) {\n        formattedInputValue += \"-\" + inputNumbersValue.substring(7, 9);\n      }\n      if (inputNumbersValue.length >= 10) {\n        formattedInputValue += \"-\" + inputNumbersValue.substring(9, 11);\n      }\n    } else {\n      // Не российский номер\n      formattedInputValue = \"+\" + inputNumbersValue.substring(0, 16);\n    }\n\n    input.value = formattedInputValue;\n  };\n\n//  Удаление первой цифры\n  let onPhoneKeyDown = function (e) {\n    let input = e.target;\n    if (e.keyCode === 8 && getInputsNumbersValue(input).length === 1) {\n      input.value = \"\";\n    }\n    if (e.keyCode === \"-\") {\n      input.value = \"\";\n    }\n  };\n\n// Нельзя вставить букву из буфера обмена\n  let onPhonePaste = function (e) {\n    let pasted = e.clipboardData || window.clipboardData;\n    let input = e.target;\n    let inputNumbersValue = getInputsNumbersValue(input);\n\n    if (pasted) {\n      let pastedText = pasted.getData(\"Text\");\n\n      if (/\\D/g.test(pastedText)) {\n        input.value = inputNumbersValue;\n      }\n    }\n  };\n\n// Перебор полей с телефонами\n  for (let i = 0; i < phoneInputs.length; i++) {\n    let input = phoneInputs[i];\n    input.addEventListener(\"input\", onPhoneInput);\n    input.addEventListener(\"keydown\", onPhoneKeyDown);\n    input.addEventListener(\"paste\", onPhonePaste);\n  }\n\n  // Модальное окно\n  let handleModalPopup = function handleModalPopup(btn, blockModal) {\n    let btns = document.querySelectorAll(btn)\n    let modal = document.querySelector(blockModal)\n    let overlay = document.querySelector('.location__overlay')\n    let arrCloseButton = document.querySelectorAll(\".js-close\")\n\n    if (btns && modal) {\n\n      btns.forEach(function (btnItem) {\n        btnItem.addEventListener(\"click\", function (evt) {\n          evt.preventDefault();\n          modal.classList.add(\"active\");\n          overlay.classList.add(\"visible-location-overlay\");\n          document.body.classList.add(\"no-scroll\");\n\n          //Передача значения data-email (Если он есть)\n          let dataEmailValue = btnItem.getAttribute('data-email')\n          let hiddenInput = document.querySelector('input[name=\"email_to\"]')\n\n          if (btnItem.hasAttribute(\"data-email\")) {\n            console.log('data-email на кнопке: ' + dataEmailValue)\n          }\n          if (hiddenInput) {\n            console.log('до присвоения: ' + hiddenInput.value)\n            hiddenInput.value = dataEmailValue\n            console.log('после присвоения: ' + hiddenInput.value)\n          }\n        });\n      });\n\n      arrCloseButton.forEach(function (closeButton) {\n        closeButton.addEventListener(\"click\", function (evt) {\n          evt.preventDefault();\n          modal.classList.remove(\"active\");\n          overlay.classList.remove(\"visible-location-overlay\");\n          document.body.classList.remove(\"no-scroll\");\n          console.log('closeButton')\n        });\n      });\n\n      overlay.addEventListener(\"click\", function (evt) {\n        evt.preventDefault();\n        modal.classList.remove(\"active\");\n        overlay.classList.remove(\"visible-location-overlay\");\n        document.body.classList.remove(\"no-scroll\");\n        console.log('overlay')\n      });\n\n      if (window.screen.width > 767) {\n        document.addEventListener(\"keydown\", function (evt) {\n          if (evt.key === \"Escape\") {\n            evt.preventDefault();\n            modal.classList.remove(\"active\");\n            overlay.classList.remove(\"visible-location-overlay\");\n            document.body.classList.remove(\"no-scroll\");\n          }\n        });\n      }\n    }\n  }\n\n  handleModalPopup(\".js-open-callback\", \".js-modal-callback\",)\n\n  // Модальное окно для видео\n  const btn = document.querySelector('.js-watch-video');\n  const modal = document.querySelector(\".js-modal-video\");\n  const closeButton = document.querySelector(\".js-close\");\n\n  const player = document.getElementById('video-iframe');\n\n  if (player) {\n    const iframeSrc = player.src;\n\n    btn.addEventListener(\"click\", function (evt) {\n      evt.preventDefault();\n      modal.classList.add(\"active\");\n      locationOverlay.classList.add(\"visible-location-overlay\");\n      document.body.classList.add(\"no-scroll\");\n    });\n\n    closeButton.addEventListener(\"click\", function (evt) {\n      evt.preventDefault();\n      modal.classList.remove(\"active\");\n      locationOverlay.classList.remove(\"visible-location-overlay\");\n      document.body.classList.remove(\"no-scroll\");\n      player.src = iframeSrc;\n    });\n    modal.addEventListener(\"click\", function (evt) {\n      evt.preventDefault();\n      modal.classList.remove(\"active\");\n      locationOverlay.classList.remove(\"visible-location-overlay\");\n      document.body.classList.remove(\"no-scroll\");\n      player.src = iframeSrc;\n    });\n\n    // Превью видео\n    let VID_REGEX = /(?:youtube(?:-nocookie)?\\.com\\/(?:[^\\/\\n\\s]+\\/\\S+\\/|(?:v|e(?:mbed)?)\\/|\\S*?[?&]v=)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/\n    let previewId = iframeSrc.match(VID_REGEX)[1]\n    let previewImg = `https://i.ytimg.com/vi/${previewId}/maxresdefault.jpg`\n\n    let imgSliderThumb = document.querySelector('.js-watch-video .swiper-slide__image img')\n    let imgSlider = document.querySelector('.js-preview-video .swiper-slide__image img')\n\n    imgSliderThumb.src = previewImg\n    imgSlider.src = previewImg\n\n  }\n\n\n  // ---------------Валидация---------------\n  const form = document.querySelector(\".form\");\n  const inputEmail = document.querySelector(\".js-input-email\");\n  const inputName = document.querySelector(\".js-input-name\");\n  // const inputPhone = document.querySelector(\".js-input-phone\");\n  const inputCheckbox = document.querySelector(\".js-input-checkbox\");\n  const inputs = document.querySelectorAll(\".validate\");\n\n  if (form) {\n    form.addEventListener('submit', (evt) => {\n\n      if (inputs) {\n        //name, surname\n        inputs.forEach((item) => {\n          if (item.value === \"\") {\n            item.classList.add(\"error\");\n          } else {\n            item.classList.remove(\"error\");\n          }\n        })\n      }\n\n      if (inputEmail) {\n        //email\n        const re = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/iu;\n        const isEmailValid = (value) => {\n          return re.test(String(value).toLowerCase());\n        }\n\n        if (!isEmailValid(inputEmail.value)) {\n          inputEmail.classList.add(\"error\");\n        } else {\n          inputEmail.classList.remove(\"error\");\n        }\n      }\n\n      if (inputCheckbox) {\n        //checkbox\n        if (!inputCheckbox.checked) {\n          inputCheckbox.classList.add(\"error\");\n        } else {\n          inputCheckbox.classList.remove(\"error\");\n        }\n      }\n\n      if (inputName.value !== \"\" && inputCheckbox.checked && inputEmail.value !== \"\") {\n        form.submit();\n        handleModalPopup(\"form-callback__submit\", \".js-modal-thanks\",)\n      } else {\n        evt.preventDefault();\n      }\n    })\n  }\n\n  // --------------- Кнопка «Прикрепить файл» ---------------\n  const fileWrapper = document.querySelectorAll(\".upload-file__wrapper\")\n\n  if (fileWrapper) {\n    for (let i = 1; i <= 4; i++) {\n      window[\"uploadDragFiles_\" + i] = new Object();\n    } // сюда будем помещать drug-&-drop файлы (4)\n\n    fileWrapper.forEach((current_item, index) => {\n\n      const inputFile = current_item.querySelector(\".upload-file__input\")\n\n      let fileList = [] // массив файлов\n\n      // --------------- Кнопка --------------\n      let textSelector = current_item.querySelector(\".upload-file__text\")\n\n      // Событие выбора файла(ов)\n      inputFile.addEventListener(\"change\", function () {\n        fileList.push(...inputFile.files);\n        // вызов функции для каждого файла\n        fileList.forEach(file => {\n          uploadFile(file);\n        });\n      });\n\n      // Проверяем размер файлов и выводим название\n      const uploadFile = (file) => {\n\n        // размер файла <5 Мб\n        if (file.size > 5 * 1024 * 1024) {\n          alert(\"Файл должен быть не более 5 МБ.\");\n          return;\n        }\n\n        // Показ загружаемых файлов\n        if (file && fileList.length > 1) {\n          if (fileList.length <= 4) {\n            textSelector.textContent = `Выбрано ${fileList.length} файла`;\n          } else {\n            textSelector.textContent = `Выбрано ${fileList.length} файлов`;\n          }\n        } else {\n          textSelector.textContent = file.name;\n        }\n        fileList = [];\n      }\n\n\n      // --------------- Загрузка файлов при помощи «Drag-and-drop» ---------------\n      const dropZone = current_item.querySelector(\".upload-file__label\");\n      const dropZoneText = current_item.querySelector(\".upload-file__text\");\n      const maxFileSize = 5000000; // максимальный размер файла - 5 мб.\n\n      // Проверка поддержки «Drag-and-drop»\n      if (typeof (window.FileReader) == \"undefined\") {\n        dropZone.textContent = \"Drag&Drop Не поддерживается браузером!\";\n        dropZone.classList.add(\"error\");\n      }\n      // Событие - перетаскивания файла\n      dropZone.ondragover = () => {\n        return false;\n      };\n      // Событие - отмена перетаскивания файла\n      dropZone.ondragleave = () => {\n        return false;\n      };\n      // Событие - файл перетащили\n      dropZone.addEventListener(\"drop\", function (e) {\n        e.preventDefault();\n\n        let uploadDragFiles = e.dataTransfer.files[0]; // один файл\n\n        // Проверка размера файла\n        if (uploadDragFiles.size > maxFileSize) {\n          dropZoneText.textContent = \"Размер превышает допустимое значение!\";\n          this.addClass(\"error\");\n          return false;\n        }\n\n        // Показ загружаемых файлов\n        if (uploadDragFiles.length > 1) {\n          if (uploadDragFiles.length <= 4) {\n            dropZoneText.textContent = `Выбрано ${uploadDragFiles.length} файла`;\n          } else {\n            dropZoneText.textContent = `Выбрано ${uploadDragFiles.length} файлов`;\n          }\n        } else {\n          dropZoneText.textContent = e.dataTransfer.files[0].name;\n        }\n\n        // добавляем файл в объект \"uploadDragFiles_i\"\n        window[\"uploadDragFiles_\" + index] = uploadDragFiles;\n      });\n\n    });\n  }\n\n  //Изменение размеров строки, при увеличении кол-ва текста. Секция каталог категорий\n  let catalogTexts = document.querySelectorAll('.catalog__text')\n\n  let switchPropertyText = function switchPropertyText(item) {\n    if (window.screen.width > 1330) {\n      item.style.fontSize = \"15px\";\n      item.style.height = '65px';\n      item.style.paddingLeft = '10px'\n      item.style.paddingRight = '10px'\n    }\n    if (window.screen.width < 1330) {\n      item.style.fontSize = \"12px\";\n      item.style.height = '62px';\n      item.style.paddingLeft = '10px'\n      item.style.paddingRight = '10px'\n    }\n    if (window.screen.width < 767) {\n      item.style.fontSize = \"10px\";\n      item.style.height = '45px';\n      item.style.paddingLeft = '10px'\n      item.style.paddingRight = '10px'\n    }\n  }\n\n  catalogTexts.forEach((item) => {\n    let string = item.innerHTML\n\n    if (string.length > 20) {\n      switchPropertyText(item)\n\n      window.addEventListener('resize', function () {\n        switchPropertyText(item)\n      }, true);\n    }\n  })\n\n\n  // Счетчик - 1 +\n  const handleCounter = (remove, add, input) => {\n    const itemsBlock = document.querySelectorAll('.shopping-item')\n\n    if (itemsBlock) {\n      itemsBlock.forEach((item) => {\n        const removeBtn = item.querySelector(remove)\n        const addBtn = item.querySelector(add)\n        const inputField = item.querySelector(input)\n\n        let counter = 1\n        addBtn.addEventListener('click', () => {\n          counter++\n          inputField.value = counter\n        })\n        removeBtn.addEventListener('click', () => {\n          if (!counter <= 0) {\n            counter--\n            inputField.value = counter\n          }\n        })\n      })\n    }\n  }\n\n  handleCounter('.shopping-item__counting-remove', '.shopping-item__counting-add', '.shopping-item__counting-number')\n\n  // ---------------Модальное окно поиска---------------\n  const handleModalSearch = () => {\n    const popupSearch = document.querySelector('.popup-callback__search')\n    const overlayBlue = document.querySelector('.overlay-blue')\n    const btn = document.querySelector('.header__search')\n    if (popupSearch) {\n      btn.addEventListener('click', () => {\n        popupSearch.classList.add('active')\n        overlayBlue.classList.add('active')\n        document.body.classList.add('no-scroll')\n      })\n      overlayBlue.addEventListener('click', () => {\n        popupSearch.classList.remove('active')\n        overlayBlue.classList.remove('active')\n        document.body.classList.remove('no-scroll')\n      })\n    }\n  }\n  handleModalSearch()\n})\n\n\n\n\n\n\n\n"],"mappings":"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"}